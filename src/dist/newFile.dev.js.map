{"version":3,"sources":["newFile.js"],"names":["bcrypt","require","collection","app","post","req","res","findOne","name","body","username","check","send","compare","password","isPasswordMatch","session","user","render","error","console","status"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMC,UAAU,GAAGD,OAAO,CAAC,UAAD,CAA1B;;eACgBA,OAAO,CAAC,GAAD,C;IAAfE,G,YAAAA,G;;AAERA,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAESJ,UAAU,CAACK,OAAX,CAAmB;AAAEC,YAAAA,IAAI,EAAEH,GAAG,CAACI,IAAJ,CAASC;AAAjB,WAAnB,CAFT;;AAAA;AAELC,UAAAA,KAFK;;AAAA,cAGNA,KAHM;AAAA;AAAA;AAAA;;AAIPL,UAAAA,GAAG,CAACM,IAAJ,CAAS,oBAAT;AAJO;AAAA;;AAAA;AAAA;AAAA,0CAMuBZ,MAAM,CAACa,OAAP,CAAeR,GAAG,CAACI,IAAJ,CAASK,QAAxB,EAAkCH,KAAK,CAACG,QAAxC,CANvB;;AAAA;AAMDC,UAAAA,eANC;;AAOP,cAAIA,eAAJ,EAAqB;AACjBV,YAAAA,GAAG,CAACW,OAAJ,CAAYC,IAAZ,GAAmBN,KAAnB,CADiB,CACS;;AAC1BL,YAAAA,GAAG,CAACY,MAAJ,CAAW,MAAX;AACH,WAHD,MAGO;AACHZ,YAAAA,GAAG,CAACM,IAAJ,CAAS,gBAAT;AACH;;AAZM;AAcT,cAAI,CAAG,CAAP,CAAQ,OAAOO,KAAP,EAAc;AACpBC,YAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAb,YAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBT,IAAhB,CAAqB,iCAArB;AACH;;AAjBU;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB","sourcesContent":["const bcrypt = require(\"bcrypt\");\r\nconst collection = require(\"./config\");\r\nconst { app } = require('.');\r\n\r\napp.post(\"/login\", async (req, res) => {\r\n    try {\r\n        const check = await collection.findOne({ name: req.body.username });\r\n        if (!check) {\r\n            res.send(\"Username not found\");\r\n        } else {\r\n            const isPasswordMatch = await bcrypt.compare(req.body.password, check.password);\r\n            if (isPasswordMatch) {\r\n                req.session.user = check; // Add this line to store the user in the session\r\n                res.render(\"home\");\r\n            } else {\r\n                res.send(\"Wrong password\");\r\n            }\r\n\r\n        } try { } catch (error) {\r\n            console.error(error);\r\n            res.status(500).send(\"An error occurred during login.\");\r\n        }\r\n    } finally { }\r\n});\r\n"],"file":"newFile.dev.js"}