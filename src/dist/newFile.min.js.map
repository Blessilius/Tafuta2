{"version":3,"sources":["newFile.js"],"names":["bcrypt","require","collection","app","req","res","findOne","name","body","username","check","send","compare","password","session","user","render"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,UACjBC,WAAaD,QAAQ,qBADZA,QAAQ,KAAjBD,aAAAA,IACNG,IAAMD,KAAAA,SAAaD,SAAQG,EAAAC,GAARJ,IAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAKSC,WAAWI,QAAQ,CAAEC,KAAMH,EAAII,KAAKC,YAL7CR,KAAAA,EAAAA,GAKLS,EALKT,EAAAA,KAAAA,CAAAA,EAAAA,KAAAA,EAAAA,MAOPI,EAAIM,KAAK,sBAPFV,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,GAAAA,mBAAAA,MAGAD,OAAAY,QAAAR,EAAAI,KAAAK,SAAAH,EAAAG,WAHAZ,KAAAA,GAAAA,EAAAA,MAGAG,EAAAU,QAAAC,KAAAL,EAAAL,EAAAW,OAAA,SAAAX,EAAAM,KAAA,kBAHAV,KAAAA,GAAAA,KAAAA,GAAAA,OAAAA,EAAAA,KAAAA,GAAAA,EAAAA,OAAAA,IAAAA,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA,CAAAA,GAAAA","file":"newFile.min.js","sourcesContent":["const bcrypt = require(\"bcrypt\");\r\nconst collection = require(\"./config\");\r\nconst { app } = require('.');\r\n\r\napp.post(\"/login\", async (req, res) => {\r\n    try {\r\n        const check = await collection.findOne({ name: req.body.username });\r\n        if (!check) {\r\n            res.send(\"Username not found\");\r\n        } else {\r\n            const isPasswordMatch = await bcrypt.compare(req.body.password, check.password);\r\n            if (isPasswordMatch) {\r\n                req.session.user = check; // Add this line to store the user in the session\r\n                res.render(\"home\");\r\n            } else {\r\n                res.send(\"Wrong password\");\r\n            }\r\n\r\n        } try { } catch (error) {\r\n            console.error(error);\r\n            res.status(500).send(\"An error occurred during login.\");\r\n        }\r\n    } finally { }\r\n});\r\n"]}